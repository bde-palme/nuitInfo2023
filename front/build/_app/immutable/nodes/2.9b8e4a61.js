import{s as B,n as A,r as F,o as Q,f as G,b as L}from"../chunks/scheduler.63274e7e.js";import{S as J,i as X,g as w,s as j,h as E,j as y,y as U,c as O,f as T,k,l as K,a as M,x as v,z as D,A as N}from"../chunks/index.40c4f36a.js";let z={comma(u){return z.split(u,[","],!0)},space(u){let e=[" ",`
`,"	"];return z.split(u,e)},split(u,e,s){let r=[],l="",c=!1,t=0,o=!1,a="",m=!1;for(let p of u)m?m=!1:p==="\\"?m=!0:o?p===a&&(o=!1):p==='"'||p==="'"?(o=!0,a=p):p==="("?t+=1:p===")"?t>0&&(t-=1):t===0&&e.includes(p)&&(c=!0),c?(l!==""&&r.push(l.trim()),l="",c=!1):l+=p;return(s||l!=="")&&r.push(l.trim()),r}};z.default=z;function W(u){return u==="start"?{input:u,textResult:`Bienvenue dans le terminal d'inscription à la nuit de l'info !
        Souhaitez-vous créer une nouvelle équipe ou modifier une équipe existante ?
        - Pour créer une nouvelle équipe, tapez "create-team"
        - Pour modifier une équipe existante, tapez "edit-team"
        - Pour vous inscrire en solo, tapez "solo". Vous serez ajouté à une équipe de participant·es solo., 
        `,nextPrefix:null,callback:null}:u==="create-team"?Y(u):u==="edit-team"?ee(u):u==="solo"?Z(u):{input:u,textResult:"Commande inconnue : utiliser start pour commencer",nextPrefix:null,callback:null}}function Y(u){const e="[<span class='text-indigo-400 font-bold'>CREATE-TEAM</span>]";let s={teamName:"",members:[{first_name:"",name:"",email:"",nickname:null,phone:"",course:!1,teacher:[""],timestamp:Date.now().toString(),study:"",pmr:!1,comment:""}],howDidYouHear:""};return{input:u,textResult:`${e} --- Lancement de la création d'équipe. ---
        `,nextPrefix:`${e} <span class='font-bold'>Nom d'équipe</span> :`,callback:r};function r(t){return s.teamName=t,{input:t,textResult:`${e} Ok !
            
            ${f} ---- Ajout du premier membre ----`,nextPrefix:`${f} <span class='font-bold'>Prénom</span> :`,callback:V((o,a)=>(s.members[0]=a,{input:o,textResult:`${e} Ok !
                    `,nextPrefix:`${e} <span class='font-bold'>Souhaites-tu ajouter un membre supplémentaire à ton équipe ? Il n'y a pas de limite au nombre de membre par équipe</span> (oui/non) :`,callback:m=>l(m,0)}))}}function l(t,o){return t==="oui"?{input:t,textResult:`${e} Ok ! Lancement de la procédure d'ajout d'un nouveau membre.
                ${e} ----- Ajout du <span class="font-bold">membre ${o+2}</span> à l'équipe -----`,nextPrefix:`${f} <span class='font-bold'>Prénom</span> :`,callback:V((a,m)=>(s.members.push(m),{input:a,textResult:`${e} Ok !
                        `,nextPrefix:`${e} <span class='font-bold'>Souhaites-tu ajouter un membre supplémentaire à ton équipe ? Il n'y a pas de limite au nombre de membre par équipe</span> (oui/non) :`,callback:p=>l(p,o+1)}))}:t==="non"?{input:t,textResult:`${e} Ok !
                `,nextPrefix:`${e} <span class='font-bold'>Comment avez-vous entendu parler de la nuit de l'info à l'ISTIC ?</span> :`,callback:c}:{input:t,textResult:`${e} Veuillez répondre par oui ou non`,nextPrefix:`${e} <span class='font-bold'>Souhaites-tu ajouter un membre supplémentaire à ton équipe ?</span> (pas de limite de membre):`,callback:a=>l(a,o)}}async function c(t){s.howDidYouHear=t;const o=window.location.hostname,a=8e3;let m=`http://${o}:${a}/createTeam/${s.teamName}`,p=await fetch(m),n=await p.text();if(p.status>=400)return{input:t,textResult:`[<span class="text-red-400 font-bold">ERREUR</span>] ${n}`,nextPrefix:null,callback:null};const i=n;let d=[],$=`http://${o}:${a}/joinTeam/${s.teamName}/${i}`;for(let h of s.members)d.push(fetch($,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:h.name,first_name:h.first_name,pmr:h.pmr,course:h.course,teacher:h.teacher,email:h.email,timestamp:Date.now().toString(),nickname:"",phone:h.phone,study:h.study,comment:""})}));return await Promise.all(d),{input:t,textResult:`${e} Ok !

            ${e} Félicitations, votre équipe a été créée avec succès !
            <span class="font-bold text-lg">(!) Mot de passe d'équipe : <span class="text-red">${i}</span></span>
            ${e} Ce mot de passe doit être conservé précieusement, il pourra vous servir à modifier votre équipe (ajouter ou supprimer des membres).
            ${e} Votre inscription est terminée. Pour modifier votre équipe, tapez "edit-team".`,nextPrefix:null,callback:null}}}function Z(u){const e="[<span class='text-indigo-400 font-bold'>REGISTRATION</span>]";return{input:u,textResult:`Lancement de la procédure d'inscription en solo.
        `,nextPrefix:`${e} <span class='font-bold'>Prénom</span> :`,callback:V((r,l)=>({input:r,textResult:`${e} Ok !
                `,nextPrefix:`${e} <span class='font-bold'>Comment avez-vous entendu parler de la nuit de l'info à l'ISTIC ?</span> :`,callback:()=>s(r,l)}))};async function s(r,l){let o=`http://${window.location.hostname}:8000/joinSolo`,a=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:l.name,first_name:l.first_name,pmr:l.pmr,course:l.course,teacher:l.teacher,email:l.email,timestamp:Date.now().toString(),nickname:"",phone:l.phone,study:l.study,comment:r})});return a.status>=400?{input:r,textResult:`[<span class="text-red-400 font-bold">ERREUR</span>] ${await a.text()}`,nextPrefix:null,callback:null}:{input:r,textResult:`${e} Ok !
            ${e} Votre inscription est terminée. Vous allez être ajouté·e à une équipe de participant·es solo.`,nextPrefix:null,callback:null}}}function ee(u){const e="[<span class='text-indigo-400 font-bold'>TEAM EDITOR</span>]";let s={name:"",password:""},r;return{input:u,textResult:"---- Editeur d'équipe ----",nextPrefix:`${e} Nom d'équipe :`,callback:l};function l(a){return s.name=a,{input:a,textResult:`Ok !
            `,nextPrefix:`${e} Mot de passe d'équipe : `,callback:c}}async function c(a){s.password=a;let n=`http://${window.location.hostname}:8000/dumpTeam/${s.name}/${s.password}`,i=await fetch(n);return i.status>=400?{input:a,textResult:`[<span class="text-red-400 font-bold">ERREUR</span>] ${await i.text()}`,nextPrefix:null,callback:null}:(r=await i.json(),{input:a,textResult:`${e} Team ${s.name}
            ${e} Votre équipe contient ${r.members.length} équipier·es :
            ${r.members.map(d=>`- ${d.first_name} ${d.name} 
`)}

            ${e} Vous pouvez supprimer ou ajouter un membre dans votre équiper.
            ${e} - <span class="font-bold">rm</span> : supprimer un membre
            ${e} - <span class="font-bold">add</span> : ajouter un membre
            ${e} - <span class="font-bold">quit</span> : Quitter l'éditeur d'équipe
            ${e} Votre commande (rm/add) :`,nextPrefix:`${e} >> `,callback:t})}function t(a){return a!="add"&&a!="rm"&&a!="quit"?{input:a,textResult:`${e} Veuillez utiliser une des commandes suivantes :
                ${e} - <span class="font-bold">rm</span> : supprimer un membre
                ${e} - <span class="font-bold">add</span> : ajouter un membre 
                ${e} - <span class="font-bold">quit</span> : quitter l'éditeur d'équipe 
                ${e} Votre commande (rm/add/quit) :`,nextPrefix:`${e} >> `,callback:t}:a=="add"?{input:a,textResult:"--- Ajout d'un nouveau membre ---",nextPrefix:`${f} Prénom : `,callback:V(async(m,p)=>{let d=`http://${window.location.hostname}:8000/joinTeam/${s.name}/${s.password}`,$=await fetch(d,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...p,timestamp:Date.now().toString(),comment:r.members.length>0?r.members[r.members.length-1].comment:""})});return $.status>=400?{input:m,textResult:`[<span class="text-red-400 font-bold">ERREUR</span>] ${await $.text()}`,nextPrefix:null,callback:null}:{input:m,textResult:`${e} Ajout du membre en cours...
                        ${e} Membre ajouté avec succès !
                        ${e} Pour continuer, Veuillez utiliser une des commandes suivantes :
                        ${e} - <span class="font-bold">rm</span> : supprimer un membre
                        ${e} - <span class="font-bold">add</span> : ajouter un membre 
                        ${e} - <span class="font-bold">quit</span> : Quitter l'éditeur d'équipe 
                        ${e} Votre commande (rm/add/quit) :`,nextPrefix:`${e} >> `,callback:t}})}:a=="rm"?{input:a,textResult:`--- Suppression d'un membre ---
                ${r.members.map((m,p)=>`${p+1} - ${m.first_name} ${m.name} 
`)}}`,nextPrefix:`${e} Numéro du membre à supprimer : `,callback:o}:{input:a,textResult:"",nextPrefix:null,callback:null}}async function o(a){let m=parseInt(a);if(Number.isNaN(m)||m<1||m>r.members.length)return{input:a,textResult:`${e} Veuillez entrer un numéro correspondant à un membre`,nextPrefix:`${e} Numéro du membre à supprimer : `,callback:o};let i=`http://${window.location.hostname}:8000/removeUser/${s.name}/${s.password}`,d=await fetch(i,{method:"POST",body:r.members[m-1].email});return d.status>=400?{input:a,textResult:`[<span class="text-red-400 font-bold">ERREUR</span>] ${await d.text()}`,nextPrefix:null,callback:null}:{input:a,textResult:`${e} Membre supprimé avec succès !
            ${e} Pour continuer, Veuillez utiliser une des commandes suivantes :
            ${e} - <span class="font-bold">rm</span> : supprimer un membre
            ${e} - <span class="font-bold">add</span> : ajouter un membre 
            ${e} - <span class="font-bold">quit</span> : Quitter l'éditeur d'équipe 
            ${e} Votre commande (rm/add/quit) :`,nextPrefix:`${e} >> `,callback:t}}}const f="[<span class='text-indigo-400 font-bold'>MEMBER</span>]";function V(u){let e={first_name:"",name:"",email:"",nickname:null,phone:"",course:!1,teacher:[""],timestamp:Date.now().toString(),study:"",pmr:!1,comment:""};return s;function s(n){return e.first_name=n,{input:n,textResult:`${f} Ok !
            `,nextPrefix:`${f} <span class='font-bold'>Nom de famille</span> :`,callback:i=>r(i)}}function r(n){return e.name=n,{input:n,textResult:`${f} Ok !
            `,nextPrefix:`${f} <span class='font-bold'>Email</span> :`,callback:i=>l(i)}}function l(n){const i=/\S+@\S+\.\S+/;return console.log(n,i.test(n)),i.test(n)?(e.email=n,{input:n,textResult:`${f} Ok !
            `,nextPrefix:`${f} <span class='font-bold'>Téléphone</span> :`,callback:d=>c(d)}):{input:n,textResult:`${f} Veuillez entrer une adresse email valide`,nextPrefix:`${f} <span class='font-bold'>Email</span> :`,callback:d=>l(d)}}function c(n){return/^(?:(?:\+|00)33|0)\s*[1-9](?:[\s.-]*\d{2}){4}$/.test(n)?(e.phone=n,{input:n,textResult:`${f} Ok !
            `,nextPrefix:`${f} <span class='font-bold'>Pseudo discord</span> (Facultatif, laissez vide) :`,callback:d=>t(d)}):{input:n,textResult:`${f} Veuillez entrer un numéro de téléphone valide (séparateur : aucun, espace, point ou tiret))`,nextPrefix:`${f} <span class='font-bold'>Téléphone</span> :`,callback:d=>c(d)}}function t(n){return e.nickname=n.length>0?n:null,{input:n,textResult:`${f} Ok !
            `,nextPrefix:`${f} <span class='font-bold'>Ce membre a t'il des cours jeudi 7 décembre après 16h30 ou le matin du vendredi 8  ?</span> (oui/non) :`,callback:i=>o(i)}}function o(n){return n!="oui"&&n!="non"?{input:n,textResult:`${f} Veuillez répondre par oui ou non`,nextPrefix:`${f} <span class='font-bold'>Ce membre a t'il cours jeudi 7 décembre après 16h30 ou le matin du vendredi 8  ?</span> (oui/non) :`,callback:i=>o(i)}:n==="oui"?(e.course=!0,{input:n,textResult:`${f} Ok !
                `,nextPrefix:`${f} <span class='font-bold'>Quels sont les noms professeurs avec qui il a cours ?</span> :`,callback:i=>a(i)}):{input:n,textResult:`${f} Ok !
                `,nextPrefix:`${f} <span class='font-bold'>Formation poursuivie</span> (nom de ta formation) :`,callback:i=>m(i)}}function a(n){return e.teacher=[n],{input:n,textResult:`${f} Ok !
            `,nextPrefix:`${f} <span class='font-bold'>Formation poursuivie</span> (nom de ta formation) :`,callback:i=>m(i)}}function m(n){return e.study=n,{input:n,textResult:`${f} Ok !
            `,nextPrefix:`${f} <span class='font-bold'>Situation de mobilités réduite ?</span> (oui/non) :`,callback:i=>p(i)}}function p(n){if(n!="oui"&&n!="non")return{input:n,textResult:`${f} Veuillez répondre par oui ou non`,nextPrefix:`${f} <span class='font-bold'>Situation de mobilités réduite ?</span> (oui/non) :`,callback:i=>p(i)};{const i=n==="oui";return e.pmr=i,u(n,e)}}}const te=""+new URL("../assets/ndl-logo.3c24f897.svg",import.meta.url).href,ne=""+new URL("../assets/close.1c8bf653.svg",import.meta.url).href,se=""+new URL("../assets/undo.97c9623d.svg",import.meta.url).href;function H(u){let e,s,r,l,c="Bienvenue à la nuit de l'info !";return{c(){e=w("img"),r=j(),l=w("h1"),l.textContent=c,this.h()},l(t){e=E(t,"IMG",{src:!0,class:!0,alt:!0}),r=O(t),l=E(t,"H1",{class:!0,"data-svelte-h":!0}),U(l)!=="svelte-1oiomsi"&&(l.textContent=c),this.h()},h(){G(e.src,s=te)||k(e,"src",s),k(e,"class","transition-[height] ease-in-out self-start h-[10vh] w-auto"),k(e,"alt","la nuit de l'info"),k(l,"class","text-2xl font-space font-bold w-full text-indigo-100")},m(t,o){M(t,e,o),M(t,r,o),M(t,l,o)},d(t){t&&(T(e),T(r),T(l))}}}function le(u){let e,s,r,l=`<h1 class="text-indigo-50 font-bold">Terminal d&#39;inscription</h1> <img src="${ne}" alt="fake close button" class="cursor-pointer stroke-slate-50"/>`,c,t,o,a=`<img src="${se}" alt="undo"/>`,m,p,n,i,d,$,h,R,C,x,b=u[3].length==0&&H();return{c(){e=w("div"),s=w("div"),r=w("div"),r.innerHTML=l,c=j(),t=w("div"),o=w("button"),o.innerHTML=a,m=j(),b&&b.c(),p=j(),n=w("div"),i=j(),d=w("div"),$=w("p"),h=j(),R=w("input"),this.h()},l(g){e=E(g,"DIV",{class:!0});var P=y(e);s=E(P,"DIV",{class:!0});var q=y(s);r=E(q,"DIV",{class:!0,"data-svelte-h":!0}),U(r)!=="svelte-1oglvf4"&&(r.innerHTML=l),c=O(q),t=E(q,"DIV",{class:!0});var _=y(t);o=E(_,"BUTTON",{class:!0,"data-svelte-h":!0}),U(o)!=="svelte-3yhz2e"&&(o.innerHTML=a),m=O(_),b&&b.l(_),p=O(_),n=E(_,"DIV",{class:!0}),y(n).forEach(T),i=O(_),d=E(_,"DIV",{class:!0});var I=y(d);$=E(I,"P",{class:!0}),y($).forEach(T),h=O(I),R=E(I,"INPUT",{class:!0}),I.forEach(T),_.forEach(T),q.forEach(T),P.forEach(T),this.h()},h(){k(r,"class","w-full h-auto py-[1vh] px-[2vw] bg-indigo-700 rounded-t-[0.6vw] flex justify-between"),k(o,"class","bg-indigo-600 hover:bg-indigo-400 active:scale-[0.9] transition-all text-indigo-50 font-bold p-1 rounded-[10px] flex justify-between absolute right-[2vw] top-[2vw]"),k(n,"class","w-full overflow-scroll transition-[height] h-auto ease-in-out grow shrink text-indigo-50 scrollbar scrollbar-thumb-indigo-900 scrollbar-track-indigo-950 scrollbar-thumb-rounded-full scrollbar-track-rounded-full"),K(n,"transition-duration",ae+"ms"),k($,"class","max-w-3/4 grow-0 shrink text-indigo-50"),k(R,"class","w-full min-w-[150px] flex-1 shrink-2 outline-none border-b-2 border-indigo-50 bg-indigo-950 font-bold text-red-400 mx-[1vw]"),k(d,"class","w-full flex items-center"),k(t,"class","p-[2vw] grow shrink w-full flex flex-col justify-between max-h-full min-h-0 relative"),k(s,"class","border border-indigo-700 border-2 w-full max-h-full shrink flex flex-col items-center rounded-[1vw] relative"),k(e,"class","absolute h-[100vh] w-full py-[3vh] px-[2vw] left-1/2 -translate-x-1/2 flex flex-col items-center justify-center bg-indigo-950")},m(g,P){M(g,e,P),v(e,s),v(s,r),v(s,c),v(s,t),v(t,o),v(t,m),b&&b.m(t,null),v(t,p),v(t,n),u[7](n),v(t,i),v(t,d),v(d,$),u[8]($),v(d,h),v(d,R),D(R,u[0]),u[10](R),C||(x=[N(o,"click",u[6]),N(R,"keydown",u[5]),N(R,"input",u[9])],C=!0)},p(g,[P]){g[3].length==0?b||(b=H(),b.c(),b.m(t,p)):b&&(b.d(1),b=null),P&1&&R.value!==g[0]&&D(R,g[0])},i:A,o:A,d(g){g&&T(e),b&&b.d(),u[7](null),u[8](null),u[10](null),C=!1,F(x)}}}const S="<span class='font-bold text-lime-500'>ndli@palme:~$ </span>",ae=250;function re(u,e,s){let r="",l,c,t=[],o;const a=`Bienvenue sur le terminal d'inscription de la nuit de l'info ! <br>
        La nuit de l'info est un hackathon national qui aura lieu du 7 au 8 décembre. Vous aurez toute la nuit pour créer un site web sur un thème national. En plus, vous pourrez choisir des défis, qui sont des contraintes supplémentaires qui vous permettront de gagner des lots (jusqu'à 5 défis et donc 5 lots par équipe). <br>
        Ce hackathon est national, et se déroule sur plusieurs sites en France. Ici, c'est pour vous inscrire au site de Beaulieu, à Rennes (ISTIC, batiment 12D). <br>
        Une fois que vous serez inscrit·e, on s'occupe de tout : vous serez inscrit·e à l'échelle nationale, un repas vous sera offert, et les portes de l'ISTIC vous seront ouverte.<br>
        L'inscription se fait grâce à ce terminal froid et austère... Pour commencer, tapez "start" !<br />`;async function m(x){x.key=="Enter"&&(t.push(await p(r)),s(3,t),s(0,r=""),n(t))}async function p(x){let b;if(t.length==0||t[t.length-1].callback==null)b=W(x);else if(t[t.length-1].callback!=null)b=await t[t.length-1].callback(x);else throw new Error("Invalid state");return b}function n(x){if(!c||!o)return;let b=x.length>0?x[x.length-1]:null;s(4,o.innerHTML=(b==null?void 0:b.nextPrefix)||S,o);const g=a+x.map((P,q,_)=>q>0?(_[q-1].nextPrefix||S)+"<span class='text-red-400'>"+P.input+"</span><br />"+P.textResult.replaceAll(`
`,"<br />"):S+"<span class='text-red-400'>"+P.input+"</span><br />"+P.textResult.replaceAll(`
`,"<br />")).join("<br />");s(2,c.innerHTML=g,c),console.log(c.scrollHeight),c==null||c.scrollTo({top:c.scrollHeight,left:0,behavior:"smooth"})}function i(){t.pop(),t.length>0?(p(t[t.length-1].input),n(t)):(d(),n(t))}function d(){o&&(s(3,t=[]),s(4,o.innerHTML=S,o))}Q(()=>{d(),l==null||l.focus(),c&&s(2,c.innerHTML=a,c)});function $(x){L[x?"unshift":"push"](()=>{c=x,s(2,c)})}function h(x){L[x?"unshift":"push"](()=>{o=x,s(4,o)})}function R(){r=this.value,s(0,r)}function C(x){L[x?"unshift":"push"](()=>{l=x,s(1,l)})}return[r,l,c,t,o,m,i,$,h,R,C]}class ue extends J{constructor(e){super(),X(this,e,re,le,B,{})}}export{ue as component};
