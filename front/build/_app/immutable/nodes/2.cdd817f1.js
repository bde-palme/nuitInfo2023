import{s as U,n as V,r as B,o as Y,b as T}from"../chunks/scheduler.e108d1fd.js";import{S as J,i as Q,g as P,s as N,h as $,j as E,y as M,c as y,f as O,k as w,l as C,a as X,x as b,z as A,A as D}from"../chunks/index.8be4893e.js";function G(a){return a==="start"?{input:a,textResult:`Bienvenue dans le terminal d'inscription à la nuit de l'info !
        Souhaitez-vous créer une nouvelle équipe ou modifier une équipe existante ?
        - Pour créer une nouvelle équipe, tapez "create-team"
        - Pour modifier une équipe existante, tapez "edit-team" 
        `,nextPrefix:null,callback:null}:a==="create-team"?K(a):{input:a,textResult:"Commande inconnue : utiliser start pour commencer",nextPrefix:null,callback:null}}const n="[<span class='text-red-400 font-bold'>CREATE-TEAM</span>]";function K(a){let l={teamName:"",members:[{firstName:"",lastName:"",email:"",discord:null,phone:"",hasLessons:null,professors:"",studies:"",pmr:!1}],howDidYouHear:"",solo:!1};return{input:a,textResult:`${n} Lancement de la création d'équipe.`,nextPrefix:`${n} <span class='font-bold'>Nom d'équipe</span> :`,callback:i};function i(e){return l.teamName=e,{input:e,textResult:`${n} Ok !
                Lancement de la procédure d'ajout du <span class="font-bold">membre 1</span> à l'équipe.,
            `,nextPrefix:`${n} <span class='font-bold'>Prénom</span> :`,callback:t=>r(t,0)}}function r(e,t){return l.members[t]={firstName:"",lastName:"",email:"",discord:null,phone:"",hasLessons:null,professors:"",studies:"",pmr:!1},l.members[t].firstName=e,{input:e,textResult:`${n} Ok !`,nextPrefix:`${n} <span class='font-bold'>Nom de famille</span> :`,callback:s=>k(s,t)}}function k(e,t){return l.members[t].lastName=e,{input:e,textResult:`${n} Ok !`,nextPrefix:`${n} <span class='font-bold'>Email</span> :`,callback:s=>u(s,t)}}function u(e,t){return l.members[t].email=e,{input:e,textResult:`${n} Ok !`,nextPrefix:`${n} <span class='font-bold'>Téléphone</span> :`,callback:s=>c(s,t)}}function c(e,t){return l.members[t].phone=e,{input:e,textResult:`${n} Ok !`,nextPrefix:`${n} <span class='font-bold'>Pseudo discord</span> (Facultatif, laissez vide) :`,callback:s=>o(s,t)}}function o(e,t){return l.members[t].discord=e,{input:e,textResult:`${n} Ok !`,nextPrefix:`${n} <span class='font-bold'>Ce membre a t'il des cours jeudi 7 décembre après 16h30 ou le matin du vendredi 8  ?</span> (oui/non) :`,callback:s=>f(s,t)}}function f(e,t){return e!="oui"&&e!="non"?{input:e,textResult:`${n} Veuillez répondre par oui ou non`,nextPrefix:`${n} <span class='font-bold'>Ce membre a t'il cours jeudi 7 décembre après 16h30 ou le matin du vendredi 8  ?</span> (oui/non) :`,callback:s=>f(s,t)}:e==="oui"?(l.members[t].hasLessons=!0,{input:e,textResult:`${n} Ok !`,nextPrefix:`${n} <span class='font-bold'>Quels sont les noms professeurs avec qui il a cours ?</span> :`,callback:s=>q(s,t)}):{input:e,textResult:`${n} Ok !`,nextPrefix:`${n} <span class='font-bold'>Formation poursuivie</span> (nom de ta formation) :`,callback:s=>v(s,t)}}function q(e,t){return l.members[t].professors=e,{input:e,textResult:`${n} Ok !`,nextPrefix:`${n} <span class='font-bold'>Formation poursuivie</span> (nom de ta formation) :`,callback:s=>v(s,t)}}function v(e,t){return l.members[t].studies=e,{input:e,textResult:`${n} Ok !`,nextPrefix:`${n} <span class='font-bold'>Situation de mobilités réduite ?</span> (oui/non) :`,callback:s=>j(s,t)}}function j(e,t){if(e!="oui"&&e!="non")return{input:e,textResult:`${n} Veuillez répondre par oui ou non`,nextPrefix:`${n} <span class='font-bold'>Situation de mobilités réduite ?</span> (oui/non) :`,callback:s=>j(s,t)};{const s=e==="oui";return l.members[t].pmr=s,{input:e,textResult:`${n} Ok !
                    ${n} Ajout du membre terminée. Le processus est en cours...
                    ${n} Validé !`,nextPrefix:`${n} <span class='font-bold'>Souhaites-tu ajouter un membre supplémentaire à ton équipe (oui/non) ?</span> (pas de limite de membre):`,callback:d=>_(d,t)}}}function _(e,t){return e==="oui"?{input:e,textResult:`${n} Ok ! Lancement de la procédure d'ajout d'un nouveau membre.
                ${n} ----- Ajout du <span class="font-bold">membre ${t+2}</span> à l'équipe -----`,nextPrefix:`${n} <span class='font-bold'>Prénom</span> :`,callback:s=>r(s,t+1)}:e==="non"?t===0?{input:e,textResult:`${n} Attention, vous êtes seul·e dans votre équipe, ce qui n'est pas autorisé.
                    ${n} Vous pourrez ajouter des membres à votre équipe plus tard en utilisant la commande "edit-team"
                    ${n} Si vous souhaitez qu'on vous ajoute à une équipe de joueurs solo, tapez "oui", sinon tapez "non" et revenez éditer votre équipe plus tard.`,nextPrefix:`${n} <span class='font-bold'>Souhaitez-vous qu'on vous ajoute à une équipe de joueurs solo ?</span> (oui/non) :`,callback:m}:{input:e,textResult:`${n} Ok !`,nextPrefix:`${n} <span class='font-bold'>Comment as-tu entendu parler de la nuit de l'info ?</span> :`,callback:p}:{input:e,textResult:`${n} Veuillez répondre par oui ou non`,nextPrefix:`${n} <span class='font-bold'>Souhaites-tu ajouter un membre supplémentaire à ton équipe ?</span> (pas de limite de membre):`,callback:s=>_(s,t)}}function m(e){return e!="oui"&&e!="non"?{input:e,textResult:`${n} Veuillez répondre par oui ou non`,nextPrefix:`${n} <span class='font-bold'>Souhaitez-vous qu'on vous ajoute à une équipe de joueurs solo ?</span> (oui/non) :`,callback:m}:(l.solo=e==="oui",{input:e,textResult:`${n} Ok !`,nextPrefix:`${n} <span class='font-bold'>Comment as-tu entendu parler de la nuit de l'info ?</span> :`,callback:p})}async function p(e){l.howDidYouHear=e;const t=window.location.origin,s=8e3;let d=`${t}:${s}/createTeam/${l.teamName}`,L=await(await fetch(d)).text(),h=[],g=`${t}:${s}/joinTeam/${l.teamName}/${L}`;for(let x of l.members)h.push(fetch(g,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:x.lastName,first_name:x.firstName,pmr:x.pmr,course:x.hasLessons,teacher:x.professors,email:x.email,nickname:"",phone:x.phone,study:x.studies,comment:""})}));return await Promise.all(h),{input:e,textResult:`${n} Ok !
            ${n} Félicitations, votre équipe a été créée avec succès !
            ${n} (!) Mot de passe d'équipe : <span class="font-bold">${L}</span>
            ${n} Ce mot de passe doit être conservé précieusement, il pourra vous servir à modifier votre équipe (ajouter ou supprimer des membres).
            ${n} Votre inscription est terminée. Pour modifier votre équipe, tapez "edit-team".`,nextPrefix:null,callback:null}}}const W=""+new URL("../assets/ndl-logo.3c24f897.svg",import.meta.url).href,Z=""+new URL("../assets/close.1c8bf653.svg",import.meta.url).href;function I(a){let l,i,r,k=`<h1 class="text-indigo-50 font-bold">Terminal d&#39;inscription</h1> <img src="${Z}" alt="fake close button" class="cursor-pointer stroke-slate-50"/>`,u,c,o,f=`<img src="${W}" class="w-2/3" alt="la nuit de l&#39;info"/>`,q,v,j="Bienvenue à la nuit de l'info !",_,m,p,e,t,s,d,H,L;return{c(){l=P("div"),i=P("div"),r=P("div"),r.innerHTML=k,u=N(),c=P("div"),o=P("div"),o.innerHTML=f,q=N(),v=P("h1"),v.textContent=j,_=N(),m=P("div"),p=N(),e=P("div"),t=P("p"),s=N(),d=P("input"),this.h()},l(h){l=$(h,"DIV",{class:!0});var g=E(l);i=$(g,"DIV",{class:!0});var x=E(i);r=$(x,"DIV",{class:!0,"data-svelte-h":!0}),M(r)!=="svelte-180lk9g"&&(r.innerHTML=k),u=y(x),c=$(x,"DIV",{class:!0});var R=E(c);o=$(R,"DIV",{class:!0,"data-svelte-h":!0}),M(o)!=="svelte-vi1ps3"&&(o.innerHTML=f),q=y(R),v=$(R,"H1",{class:!0,"data-svelte-h":!0}),M(v)!=="svelte-19a89si"&&(v.textContent=j),_=y(R),m=$(R,"DIV",{class:!0}),E(m).forEach(O),p=y(R),e=$(R,"DIV",{class:!0});var S=E(e);t=$(S,"P",{class:!0}),E(t).forEach(O),s=y(S),d=$(S,"INPUT",{class:!0}),S.forEach(O),R.forEach(O),x.forEach(O),g.forEach(O),this.h()},h(){w(r,"class","w-full h-auto py-[1vh] px-[2vw] bg-indigo-700 rounded-t-[0.6vw] flex justify-between"),w(o,"class","transition-[width] ease-in-out self-start"),C(o,"transition-duration",F+"ms"),C(o,"width",a[4].length>0?"10%":"40%"),w(v,"class","text-2xl font-space font-bold w-full text-indigo-100"),w(m,"class","w-full overflow-scroll transition-[height] ease-in-out grow shrink text-indigo-50 "),C(m,"transition-duration",F+"ms"),C(m,"height",a[3]+"px"),w(t,"class","max-w-3/4 grow-0 shrink text-indigo-50"),w(d,"class","w-full min-w-[150px] flex-1 shrink-2 outline-none border-b-2 border-indigo-50 bg-indigo-950 text-indigo-50 mx-[1vw]"),w(e,"class","w-full flex"),w(c,"class","p-[2vw] grow shrink w-full flex flex-col justify-between max-h-full min-h-0"),w(i,"class","border border-indigo-700 border-2 w-full max-h-full flex flex-col items-center rounded-[1vw] relative"),w(l,"class","absolute py-[3vh] h-[100vh] w-full px-[2vw] left-1/2 -translate-x-1/2 flex flex-col items-center justify-center bg-indigo-950")},m(h,g){X(h,l,g),b(l,i),b(i,r),b(i,u),b(i,c),b(c,o),b(c,q),b(c,v),b(c,_),b(c,m),a[7](m),b(c,p),b(c,e),b(e,t),a[8](t),b(e,s),b(e,d),A(d,a[0]),a[10](d),H||(L=[D(d,"keydown",a[6]),D(d,"input",a[9])],H=!0)},p(h,[g]){g&16&&C(o,"width",h[4].length>0?"10%":"40%"),g&8&&C(m,"height",h[3]+"px"),g&1&&d.value!==h[0]&&A(d,h[0])},i:V,o:V,d(h){h&&O(l),a[7](null),a[8](null),a[10](null),H=!1,B(L)}}}const z="<span class='font-bold text-lime-500'>ndli@palme:~$ </span>",F=250;function ee(a,l,i){let r="",k,u,c=0,o=[],f;async function q(p){if(p.key!="Enter"||!u||!f)return;let e;if(o.length==0||o[o.length-1].callback==null)e=G(r);else if(o[o.length-1].callback!=null)e=await o[o.length-1].callback(r);else throw new Error("Invalid state");o.push(e),i(4,o),console.log(f,e.nextPrefix,z),i(5,f.innerHTML=e.nextPrefix||z,f),i(2,u.innerHTML=o.map((t,s,d)=>s>0?(d[s-1].nextPrefix||z)+t.input+"<br />"+t.textResult.replaceAll(`
`,"<br />"):z+t.input+"<br />"+t.textResult.replaceAll(`
`,"<br />")).join("<br />"),u),i(3,c=u.scrollHeight),i(0,r=""),u==null||u.scrollTo({top:u.scrollHeight,left:0,behavior:"smooth"})}Y(()=>{f&&(i(5,f.innerHTML=z,f),k==null||k.focus())});function v(p){T[p?"unshift":"push"](()=>{u=p,i(2,u)})}function j(p){T[p?"unshift":"push"](()=>{f=p,i(5,f)})}function _(){r=this.value,i(0,r)}function m(p){T[p?"unshift":"push"](()=>{k=p,i(1,k)})}return[r,k,u,c,o,f,q,v,j,_,m]}class se extends J{constructor(l){super(),Q(this,l,ee,I,U,{})}}export{se as component};
